{% if items is empty %}
    <div class="text-center py-4">
        <i class="bi bi-cart-x text-secondary opacity-50" style="font-size: 3rem;"></i>
        <h5 class="mt-3 text-secondary">Your cart is empty</h5>
        <p class="text-muted">Discover our collection and add some books to your cart.</p>
    </div>
{% else %}
    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr>
                    <th scope="col" style="width: 80px;">Image</th>
                    <th scope="col">Book</th>
                    <th scope="col" class="text-center">Price</th>
                    <th scope="col" class="text-center">Qty</th>
                    <th scope="col" class="text-end">Total</th>
                    <th scope="col" class="text-end">Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for item in items %}
                <tr>
                    <td>
                        <img src="{{ item.book.imageUrl }}" 
                             class="rounded border shadow-sm" 
                             width="60" height="80" 
                             style="object-fit: cover;"
                             alt="{{ item.book.title }}"
                             onerror="this.src='https://via.placeholder.com/60x80?text=No+Image'">
                    </td>
                    <td>
                        <h6 class="mb-1 fw-semibold">{{ item.book.title }}</h6>
                        <p class="text-muted small mb-0">by {{ item.book.author }}</p>
                    </td>
                    <td class="text-center">
                        {{ item.book.price|number_format(2) }} TND
                    </td>
                    <td class="text-center">
                        <div class="d-flex justify-content-center align-items-center">
                            <a href="{{ path('cart_decrement', {id: item.book.id}) }}" 
                               class="btn btn-sm btn-outline-secondary rounded-circle" 
                               title="Decrease quantity">
                                <i class="bi bi-dash"></i>
                            </a>
                            <span class="mx-2 fw-bold">{{ item.quantity }}</span>
                            <a href="{{ path('cart_add', {id: item.book.id}) }}" 
                               class="btn btn-sm btn-outline-primary rounded-circle" 
                               title="Increase quantity">
                                <i class="bi bi-plus"></i>
                            </a>
                        </div>
                    </td>
                    <td class="text-end fw-bold">
                        {{ (item.book.price * item.quantity)|number_format(2) }} TND
                    </td>
                    <td class="text-end">
                        <a href="{{ path('cart_remove', {id: item.book.id}) }}" 
                           class="btn btn-sm btn-outline-danger rounded-circle" 
                           title="Remove from cart">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="d-flex justify-content-between align-items-center mt-3 p-3 bg-light rounded-3">
        <a href="{{ path('cart_clear') }}" class="btn btn-outline-danger btn-sm rounded-pill">
            <i class="bi bi-trash me-1"></i>Clear Cart
        </a>
        <div class="d-flex align-items-center">
            <span class="me-2">Total:</span>
            <span class="fs-5 fw-bold text-primary">{{ total|number_format(2) }} TND</span>
        </div>
    </div>
{% endif %}